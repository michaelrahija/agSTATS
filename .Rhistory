x <- 2
x+3
install.packages(c("knitr",
"ggplot2",
"dplyr",
"tidyr",
"stringr",
"likert",
"reshape2",
"lattice",
"XLConnect",
"xlsx",
"foreign"))
install.packages("httr")
install.packages("lubridate")
#explore a bit Imb Casa_vendita
library(data.table)
library(dplyr)
library(rvest)
library(romeHousePrices)
if(Sys.info()[4] == "JOSH_LAPTOP"){
workingDir = "~/GitHub/romeHousePrices"
savingDir = "~/../Dropbox/romeHouseData/"
} else if(Sys.info()[4] == "joshuaUbuntuLinux"){
workingDir = "~/Documents/Github/romeHousePrices"
} else if(Sys.info()[4] =="Michaels-MacBook-Pro-2.local"||
Sys.info()[4] == "Michaels-MBP-2.lan"){
workingDir = "~/Dropbox/romeHousePrices/"
savingDir = "~/DropBox/romeHouseData/" #for michael's mac yo
} else {
stop("No directory for current user!")
}
pullNewAddresses()
pullNewAddresses()
ibrary(data.table)
library(dplyr)
library(rvest)
library(romeHousePrices)
if(Sys.info()[4] == "JOSH_LAPTOP"){
workingDir = "~/GitHub/romeHousePrices"
savingDir = "~/../Dropbox/romeHouseData/"
} else if(Sys.info()[4] == "joshuaUbuntuLinux"){
workingDir = "~/Documents/Github/romeHousePrices"
} else if(Sys.info()[4] =="Michaels-MacBook-Pro-2.local"||
Sys.info()[4] == "Michaels-MBP-2.lan"){
workingDir = "~/Dropbox/romeHousePrices/"
savingDir = "~/DropBox/romeHouseData/" #for michael's mac yo
} else {
stop("No directory for current user!")
}
dataFiles = list.files(savingDir, pattern = ".Rdta")
mioFiles = dataFiles[grepl("^Vend_Casa", dataFiles)]
load(paste0(savingDir,mioFiles))
d <- as.data.frame(master)
#########################
##   GENERAL CLEANING  ##
#########################
# REMOVE DUPLICATES
d <- unique(d)
#clean column names
colnames(d) <- gsub("[^a-zA-Z0-9]","",colnames(d))
#randomly sample some rows:
# set.seed(1)
# samp <- sample(1:nrow(master),100)
# d <- d[samp,]
#####################
## clean addresses ##
#####################
#replace addresses on "Roma" with NA
test.i <- d$indirizzo == "Roma"
d$indirizzo[test.i] <- "NA"
####################
## create CAP     ##
####################
d$cap <- gsub(".*, ","",d$indirizzo)
d$cap <- gsub("-.*","",d$cap)
test.cap <- grepl("[0-9]{5}",d$cap)
d$cap[!test.cap] <- "NA"
##############################
##    ZONA                  ##
## *FIND WAY TO SOLVE NA    ##
##############################
blank <- d$zona == ""
d$zona[blank] = "NA"
# tab <-  d %>% group_by(zona) %>% summarize(num=length(indirizzo))
# tab$share = tab$num/nrow(d)
# tab$share <- round(tab$share, digits = 3)
# tab
############################
##      CLEAN PRICE       ##
############################
d$prezzo  <- gsub("^[€]","",d$prezzo)
d$prezzo <- gsub("[€] .*","",d$prezzo)
d$prezzo <- gsub("^ ","",d$prezzo)
d$prezzo <- gsub(" $","",d$prezzo)
d$prezzo <- gsub("[^a-zA-Z0-9]","",d$prezzo)
#change price withheld to NA
d$prezzo <- as.numeric(d$prezzo)
ibrary(data.table)
library(dplyr)
library(rvest)
library(romeHousePrices)
if(Sys.info()[4] == "JOSH_LAPTOP"){
workingDir = "~/GitHub/romeHousePrices"
savingDir = "~/../Dropbox/romeHouseData/"
} else if(Sys.info()[4] == "joshuaUbuntuLinux"){
workingDir = "~/Documents/Github/romeHousePrices"
} else if(Sys.info()[4] =="Michaels-MacBook-Pro-2.local"||
Sys.info()[4] == "Michaels-MBP-2.lan"){
workingDir = "~/Dropbox/romeHousePrices/"
savingDir = "~/DropBox/romeHouseData/" #for michael's mac yo
} else {
stop("No directory for current user!")
}
dataFiles = list.files(savingDir, pattern = ".Rdta")
mioFiles = dataFiles[grepl("^Vend_Casa", dataFiles)]
load(paste0(savingDir,mioFiles))
d <- as.data.frame(master)
#########################
##   GENERAL CLEANING  ##
#########################
# REMOVE DUPLICATES
d <- unique(d)
#clean column names
colnames(d) <- gsub("[^a-zA-Z0-9]","",colnames(d))
#randomly sample some rows:
# set.seed(1)
# samp <- sample(1:nrow(master),100)
# d <- d[samp,]
#####################
## clean addresses ##
#####################
#replace addresses on "Roma" with NA
test.i <- d$indirizzo == "Roma"
d$indirizzo[test.i] <- "NA"
####################
## create CAP     ##
####################
d$cap <- gsub(".*, ","",d$indirizzo)
d$cap <- gsub("-.*","",d$cap)
test.cap <- grepl("[0-9]{5}",d$cap)
d$cap[!test.cap] <- "NA"
##############################
##    ZONA                  ##
## *FIND WAY TO SOLVE NA    ##
##############################
blank <- d$zona == ""
d$zona[blank] = "NA"
# tab <-  d %>% group_by(zona) %>% summarize(num=length(indirizzo))
# tab$share = tab$num/nrow(d)
# tab$share <- round(tab$share, digits = 3)
# tab
############################
##      CLEAN PRICE       ##
############################
d$prezzo  <- gsub("^[€]","",d$prezzo)
d$prezzo <- gsub("[€] .*","",d$prezzo)
d$prezzo <- gsub("^ ","",d$prezzo)
d$prezzo <- gsub(" $","",d$prezzo)
d$prezzo <- gsub("[^a-zA-Z0-9]","",d$prezzo)
#change price withheld to NA
d$prezzo <- as.numeric(d$prezzo)
#explore a bit Imb Casa_vendita
library(data.table)
library(dplyr)
library(rvest)
library(romeHousePrices)
if(Sys.info()[4] == "JOSH_LAPTOP"){
workingDir = "~/GitHub/romeHousePrices"
savingDir = "~/../Dropbox/romeHouseData/"
} else if(Sys.info()[4] == "joshuaUbuntuLinux"){
workingDir = "~/Documents/Github/romeHousePrices"
} else if(Sys.info()[4] =="Michaels-MacBook-Pro-2.local"||
Sys.info()[4] == "Michaels-MBP-2.lan"){
workingDir = "~/Dropbox/romeHousePrices/"
savingDir = "~/DropBox/romeHouseData/" #for michael's mac yo
} else {
stop("No directory for current user!")
}
dataFiles = list.files(savingDir, pattern = ".Rdta")
mioFiles = dataFiles[grepl("^Vend_Casa", dataFiles)]
load(paste0(savingDir,mioFiles))
d <- as.data.frame(master)
#########################
##   GENERAL CLEANING  ##
#########################
# REMOVE DUPLICATES
d <- unique(d)
#clean column names
colnames(d) <- gsub("[^a-zA-Z0-9]","",colnames(d))
#randomly sample some rows:
# set.seed(1)
# samp <- sample(1:nrow(master),100)
# d <- d[samp,]
#####################
## clean addresses ##
#####################
#replace addresses on "Roma" with NA
test.i <- d$indirizzo == "Roma"
d$indirizzo[test.i] <- "NA"
####################
## create CAP     ##
####################
d$cap <- gsub(".*, ","",d$indirizzo)
d$cap <- gsub("-.*","",d$cap)
test.cap <- grepl("[0-9]{5}",d$cap)
d$cap[!test.cap] <- "NA"
##############################
##    ZONA                  ##
## *FIND WAY TO SOLVE NA    ##
##############################
blank <- d$zona == ""
d$zona[blank] = "NA"
# tab <-  d %>% group_by(zona) %>% summarize(num=length(indirizzo))
# tab$share = tab$num/nrow(d)
# tab$share <- round(tab$share, digits = 3)
# tab
############################
##      CLEAN PRICE       ##
############################
d$prezzo  <- gsub("^[€]","",d$prezzo)
d$prezzo <- gsub("[€] .*","",d$prezzo)
d$prezzo <- gsub("^ ","",d$prezzo)
d$prezzo <- gsub(" $","",d$prezzo)
d$prezzo <- gsub("[^a-zA-Z0-9]","",d$prezzo)
#change price withheld to NA
d$prezzo <- as.numeric(d$prezzo)
colnames(d)
tab <- d %>% group_by(Locali) %>% summarize(n())
tab
data.frame(tab)
source('~/Dropbox/ad_hoc_R/regression models/Quiz1.R')
.4(1.5)
.4*(1.5)
x <- c(8.58, 10.46, 9.01, 9.64, 8.86)
mean <- mean(x)
sd <- sd(x)
(x - mean)/sd
x <- c(0.8, 0.47, 0.51, 0.73, 0.36, 0.58, 0.57, 0.85, 0.44, 0.42)
y <- c(1.39, 0.72, 1.55, 0.48, 1.19, -1.59, 1.23, -0.65, 1.49, 0.05)
lm(x~y)
lm(y~x)
x <- c(0.8, 0.47, 0.51, 0.73, 0.36, 0.58, 0.57, 0.85, 0.44, 0.42)
meanx(x)
x <- c(0.8, 0.47, 0.51, 0.73, 0.36, 0.58, 0.57, 0.85, 0.44, 0.42)
mean(x)
lm(x~x)
x <- c(0.8, 0.47, 0.51, 0.73, 0.36, 0.58, 0.57, 0.85, 0.44, 0.42)
y <- c(1.39, 0.72, 1.55, 0.48, 1.19, -1.59, 1.23, -0.65, 1.49, 0.05)
lm(y~x)
x <- c(0.8, 0.47, 0.51, 0.73, 0.36, 0.58, 0.57, 0.85, 0.44, 0.42)
y <- c(1.39, 0.72, 1.55, 0.48, 1.19, -1.59, 1.23, -0.65, 1.49, 0.05)
num <- sum(x*y)
denom <- sum(x^2)
num/denom
library(datasets)
df <- data(mtcars)
lm(mpg ~ wt, data = mtcars)
.4*(1.5)
x <- c(8.58, 10.46, 9.01, 9.64, 8.86)
mean <- mean(x)
sd <- sd(x)
(x - mean)/sd
x <- c(0.8, 0.47, 0.51, 0.73, 0.36, 0.58, 0.57, 0.85, 0.44, 0.42)
y <- c(1.39, 0.72, 1.55, 0.48, 1.19, -1.59, 1.23, -0.65, 1.49, 0.05)
lm(y~x)
x <- c(0.8, 0.47, 0.51, 0.73, 0.36, 0.58, 0.57, 0.85, 0.44, 0.42)
mean(x)
lm(x~x)
summary(cars)
data(diamond)
library(ggplot2)
data(diamond)
library(datasets)
data("diamonds")
head(ddiamonds)
head(diamonds)
y <- diamonds$price
x <- diamonds$carat
residuals(lm(y~x))
sum(residuals(lm(y~x)))
res <- residuals(lm(y~x))
mod <- lm(y~x)
mod
yhat <- predict(mod)
res == (yhat - y)
yhat <- predict(mod)
sum(resid(mod) == y - yhat)
install.packages("dict")
install.packages("installr") # install
setInternet2(TRUE)
installr::updateR() # updating R.
names = c("Michael Austin Rahija","Lucia Rita Latino")
gsub(pattern = "[Aa-zZ]+ \s", "", names)
gsub(pattern = "[Aa-zZ]+ ", "", names)
gsub(pattern = "[Aa-zZ]+ \s", "", names)
gsub(pattern = "[Aa-zZ]+ \\s", "", names)
gsub(pattern = "[Aa-Zz]+ \s", "", names)
gsub(pattern = "[Aa-Zz]+ \\s", "", names)
gsub(pattern = "[Aa-Zz]+ ", "", names)
gsub(pattern = "[aA-Zz]+ ", "", names)
gsub(pattern = "[aA-Zz]+  ", "", names)
gsub(pattern = "[aA-Zz]+\s  ", "", names)
gsub(pattern = "^[aA-Zz]+ ", "", names)
gsub(pattern = "^[aA-Zz]+ \\s", "", names)
class(names)
gsub(pattern = "^[Aa-Zz]+ \\s", "", names)
gsub(pattern = "^[Aa-Zz]+\\s", "", names)
gsub(pattern = "^[A-Za-z]+\\s", "", names)
gsub(pattern = "\s  [A-Za-z]+", names)
gsub(pattern = "\\s  [A-Za-z]+", names)
gsub(pattern = "\\s  [A-Za-z]+","", names)
gsub(pattern = "\s  [A-Za-z]+", names)
names = gsub(pattern = "^[A-Za-z]+\\s", "", names)
names
gsub(pattern = "\s  [A-Za-z]+", names)
gsub(pattern = "  [A-Za-z]+", names)
gsub(pattern = "  [A-Za-z]+", "",names)
gsub(pattern = "//s [A-Za-z]+", "",names)
gsub(pattern = "//s[A-Za-z]+", "",names)
gsub(pattern = "\\s[A-Za-z]+", "",names)
#create maps
#create maps and figures for analysis
#-- import data and packages
library(dplyr)
library(ggplot2)
library(countrycode)
library(gisfao)
library(sp)
library(tidyr)
library(grid)
sys <- Sys.info()
if(sys[5] == "x86_64"){
dir = "~/Dropbox/agSTATS" #Mac
data.dir = "~/Dropbox/agSTATS/data/"
} else if (sys[5] == "Michael"){
dir = "C:/Users/Michael/Dropbox/agSTATS"#HOME PC
data.dir = "C:/Users/Michael/Dropbox/agSTATS/data/"
} else if (sys[6]=="Rahija") {
dir = "C:/Users/rahija/Dropbox/agSTATS" #FAO PC
data.dir = "C:/Users/rahija/Dropbox/agSTATS/data/"
} else {
stop("Implement location for current user!")
}
#for Strengthening Agricultural Statistics and Food Security Information in CARD Countries through South-South Cooperation
#change name of cote d'ivoire
#also for "Space Data Management System (SDMS) -  Acquire, Query, Process and Deliver Earth Observation Data and Forest Information Products to Developing Countries." you have global as the country, but allocated country column = 1. Please fix.
setwd(dir)
data <- read.csv(paste0(data.dir,"agstats_final_for narrative_V4.csv"),
stringsAsFactors = FALSE)
source("R/cleanFigures.R")
data <- cleanFigures(data)
#create estimated flow map
source("R/flowMap.R")
flowMap(data = data, include.donors = TRUE)
